(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5891407a"],{"0ded":function(t,a,i){"use strict";var e=i("b884"),s=i.n(e);s.a},"0fa5":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("NavBar"),i("main",[i("Alert"),i("div",{staticClass:"container",staticStyle:{"min-height":"81vh"}},[t._m(0),i("nav",{attrs:{"aria-label":"breadcrumb"}},[i("ol",{staticClass:"breadcrumb"},[i("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[i("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),i("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[t._v("商城")])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-3 col-sm-12"},[i("div",{staticClass:"sticky-top pt-4"},[i("ul",{staticClass:"list-group product-sidebar mb-3 text-center"},[i("li",{staticClass:"list-group-item product-sidebar-items",class:{active:""===t.tempCategory},on:{click:function(a){t.tempCategory="",t.getAllProducts()}}},[t._v("所有商品")]),i("li",{staticClass:"list-group-item product-sidebar-items",class:{active:"競速車"===t.tempCategory},on:{click:function(a){t.tempCategory="競速車",t.getCategoryProducts("競速車")}}},[t._v("競速車")]),i("li",{staticClass:"list-group-item product-sidebar-items",class:{active:"道具車"===t.tempCategory},on:{click:function(a){t.tempCategory="道具車",t.getCategoryProducts("道具車")}}},[t._v("道具車")]),i("li",{staticClass:"list-group-item product-sidebar-items",class:{active:"角色"===t.tempCategory},on:{click:function(a){t.tempCategory="角色",t.getCategoryProducts("角色")}}},[t._v("角色")])])])]),i("div",{staticClass:"col-lg-9 col-sm-12"},[i("loading",{attrs:{active:t.isloading},on:{"update:active":function(a){t.isloading=a}}},[[i("div",{staticClass:"bazzi-loading"})]],2),i("div",{staticClass:"row"},t._l(t.filterData,(function(a){return i("div",{key:a.id,staticClass:"col-lg-4 mb-4"},[i("div",{staticClass:"card shadow-sm h-100"},[i("a",{staticClass:"myfavorite",attrs:{type:"button"}},[t.isfavored(a)?i("i",{staticClass:"fas fa-heart",on:{click:function(i){return i.preventDefault(),t.changeFavorite(a)}}}):i("i",{staticClass:"far fa-heart",on:{click:function(i){return i.preventDefault(),t.changeFavorite(a)}}})]),i("img",{staticClass:"card-img-top p-2 bg-dark",attrs:{src:""+a.imageUrl,alt:""+a.title}}),i("div",{staticClass:"card-body"},[i("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),i("h5",{staticClass:"card-title"},[t._v(t._s(a.title))]),i("div",{staticClass:"d-flex justify-content-between"},[i("div",{staticClass:"d-flex flex-column"},[a.price===a.origin_price?i("p",[t._v("售價"+t._s(a.origin_price)+"元")]):t._e(),a.price!==a.origin_price?i("del",{staticClass:"mr-1"},[t._v("原價"+t._s(a.origin_price)+"元")]):t._e(),a.price!==a.origin_price?i("p",{staticClass:"m-0 text-danger"},[t._v("售價"+t._s(a.price)+" 元")]):t._e()]),i("div",{staticClass:"d-flex align-items-end"},[i("button",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{type:"button"},on:{click:function(i){return t.getProduct(a.id)}}},[i("i",{staticClass:"fas fa-info-circle"})]),i("button",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button"},on:{click:function(i){return t.addCart(a.id,1)}}},[i("i",{staticClass:"fas fa-shopping-cart"})])])])])])])})),0),""===t.tempCategory?i("Pagination",{attrs:{pagination:t.pagination},on:{getpage:t.getAllProducts}}):t._e()],1)])])],1),i("Footer")],1)},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"row mb-3"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"background"},[i("div",{staticClass:"text mx-2"},[i("h1",{staticClass:"text-white text-center p-3"},[t._v("輸入優惠碼打 9 折")])])])])])}],r=i("5d6b"),n=i("3650"),o=i("d529"),c=i("f688"),l={name:"Shop",components:{NavBar:r["a"],Footer:n["a"],Pagination:o["a"],Alert:c["a"]},data:function(){return{products:[],product:{num:1},cartContents:{},tempCategory:"",isloading:!1,pagination:[],favorites:[]}},methods:{getAllProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/products?page=").concat(t);a.isloading=!0,this.$http.get(i).then((function(t){a.products=t.data.products,a.isloading=!1,a.pagination=t.data.pagination}))},getCategoryProducts:function(t){var a=this;a.tempCategory=t;var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/products/all");a.isloading=!0,this.$http.get(i).then((function(t){a.products=t.data.products,a.tempCategory&&a.products.filter((function(t){return t.category===a.tempCategory})),a.isloading=!1}))},getProduct:function(t){var a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/product/").concat(t);this.$http.get(i).then((function(i){a.product=i.data.product,a.$set(a.product,"num",1),a.$router.push("/product/".concat(t))}))},addCart:function(t){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/cart/");e.isloading=!0;var r={product_id:t,qty:i};this.$http.post(s,{data:r}).then((function(t){t.data.success?(a.$bus.$emit("message:push","已增加至購物車","success"),a.$bus.$emit("updateCart")):a.$bus.$emit("message:push","增加至購物車失敗","danger"),e.isloading=!1}))},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/cart/");t.isloading=!0,this.$http.get(a).then((function(a){t.cartContents=a.data.data,t.loadingItem="",t.isloading=!1}))},getFavorites:function(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]},changeFavorite:function(t){var a=this;if(0===a.favorites.length||a.favorites.every((function(a){return a.id!==t.id})))a.favorites.push(t);else{var i=a.favorites.findIndex((function(a){return a.id===t.id}));a.favorites.splice(i,1)}localStorage.setItem("favorites",JSON.stringify(a.favorites)),a.getFavorites(),a.$bus.$emit("favor:get")},isfavored:function(t){var a=this.favorites.filter((function(a){return a.id===t.id}));return a.length>0}},computed:{filterData:function(){var t=this;return""===t.tempCategory?t.products:t.products.filter((function(a){return a.category===t.tempCategory}))}},created:function(){var t=this;t.getAllProducts(),t.getCart(),t.getFavorites(),t.$bus.$on("productFavor:get",(function(){return t.getFavorites()})),t.$bus.$on("message:category",(function(a){return t.getCategoryProducts(a)}))},beforeDestroy:function(){var t=this;t.$bus.$off("productFavor:get"),t.$bus.$off("message:category")}},u=l,d=(i("0ded"),i("2877")),p=Object(d["a"])(u,e,s,!1,null,"11dce2a3",null);a["default"]=p.exports},b884:function(t,a,i){},d529:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"d-flex justify-content-center"},[i("nav",{attrs:{"aria-label":"Page navigation example"}},[i("ul",{staticClass:"pagination"},[i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(a){return i("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[i("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])})),i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},s=[],r={props:["pagination"],methods:{getProducts:function(t){this.$emit("getpage",t)}}},n=r,o=i("2877"),c=Object(o["a"])(n,e,s,!1,null,null,null);a["a"]=c.exports}}]);
//# sourceMappingURL=chunk-5891407a.e7642c42.js.map